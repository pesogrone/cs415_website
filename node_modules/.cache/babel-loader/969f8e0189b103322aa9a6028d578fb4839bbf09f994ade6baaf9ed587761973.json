{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const UserProfile=()=>{const navigate=useNavigate();const[userColumns,setUserColumns]=useState([]);const[record,setRecord]=useState([]);// const [addressColumns, setAddressColumns] = useState([]);\n// const [addresses, setAddresses] = useState([]);\n// const [phoneColumns, setPhoneColumns] = useState([]);\n// const [phones, setPhones] = useState([]);\n// const [infoColumns, setInfoColumns] = useState([]);\n// const [info, setInfo] = useState([]);\nconst user_id=window.sessionStorage.getItem(\"user_id\");useEffect(()=>{if(!window.sessionStorage.getItem(\"auth\"))navigate(\"/unauthorized\");fetch(process.env.REACT_APP_API_URL_BASE+\"/users/user/\"+user_id).then(res=>res.json()).then(data=>{console.log(data);setUserColumns(Object.keys(data.user));setRecord(data.user);console.log(record);// setInfoColumns(Object.keys(data.info[0]));\n// setInfo(data.info);\n// setAddressColumns(Object.keys(data.addresses[0]));\n// setAddresses(data.addresses);\n// setPhoneColumns(Object.keys(data.phones[0]));\n// setPhones(data.phones);\n}).catch(error=>console.error(error));},[]);const handleLogout=e=>{e.preventDefault();window.sessionStorage.removeItem(\"auth\");window.sessionStorage.removeItem(\"user_id\");window.sessionStorage.removeItem(\"token\");navigate(\"/login\");};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:record.user_name}),/*#__PURE__*/_jsx(\"h2\",{children:\"User\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:userColumns.map((c,i)=>/*#__PURE__*/_jsx(\"th\",{children:c.replaceAll(\"_\",\" \").toUpperCase()},i))})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:record.user_id}),/*#__PURE__*/_jsx(\"td\",{children:record.user_name}),/*#__PURE__*/_jsx(\"td\",{children:record.email}),/*#__PURE__*/_jsx(\"td\",{class:\"hidetext\",children:record.password}),/*#__PURE__*/_jsx(\"td\",{children:record.firstname}),/*#__PURE__*/_jsx(\"td\",{children:record.lastname}),/*#__PURE__*/_jsx(\"td\",{children:record.address})]})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"})]});};export default UserProfile;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","UserProfile","navigate","userColumns","setUserColumns","record","setRecord","user_id","window","sessionStorage","getItem","fetch","process","env","REACT_APP_API_URL_BASE","then","res","json","data","console","log","Object","keys","user","catch","error","handleLogout","e","preventDefault","removeItem","children","user_name","className","map","c","i","replaceAll","toUpperCase","email","class","password","firstname","lastname","address","onClick"],"sources":["C:/Users/rmbgk/Desktop/semesters/Winter 2023/Cs415/cs415_website/src/Components/UserProfile.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst UserProfile = () => {\r\n  const navigate = useNavigate();\r\n  const [userColumns, setUserColumns] = useState([]);\r\n  const [record, setRecord] = useState([]);\r\n  // const [addressColumns, setAddressColumns] = useState([]);\r\n  // const [addresses, setAddresses] = useState([]);\r\n  // const [phoneColumns, setPhoneColumns] = useState([]);\r\n  // const [phones, setPhones] = useState([]);\r\n  // const [infoColumns, setInfoColumns] = useState([]);\r\n  // const [info, setInfo] = useState([]);\r\n  const user_id = window.sessionStorage.getItem(\"user_id\");\r\n\r\n  useEffect(() => {\r\n    if (!window.sessionStorage.getItem(\"auth\")) navigate(\"/unauthorized\");\r\n    fetch(process.env.REACT_APP_API_URL_BASE + \"/users/user/\" + user_id)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        console.log(data);\r\n        setUserColumns(Object.keys(data.user));\r\n        setRecord(data.user);\r\n        console.log(record);\r\n        // setInfoColumns(Object.keys(data.info[0]));\r\n        // setInfo(data.info);\r\n        // setAddressColumns(Object.keys(data.addresses[0]));\r\n        // setAddresses(data.addresses);\r\n        // setPhoneColumns(Object.keys(data.phones[0]));\r\n        // setPhones(data.phones);\r\n      })\r\n      .catch((error) => console.error(error));\r\n  }, []);\r\n\r\n  const handleLogout = (e) => {\r\n    e.preventDefault();\r\n    window.sessionStorage.removeItem(\"auth\");\r\n    window.sessionStorage.removeItem(\"user_id\");\r\n    window.sessionStorage.removeItem(\"token\");\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <p>{record.user_name}</p>\r\n      <h2>User</h2>\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            {userColumns.map((c, i) => (\r\n              <th key={i}>{c.replaceAll(\"_\", \" \").toUpperCase()}</th>\r\n            ))}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {\r\n            <tr>\r\n              <td>{record.user_id}</td>\r\n              <td>{record.user_name}</td>\r\n              <td>{record.email}</td>\r\n              <td class=\"hidetext\">{record.password}</td>\r\n              <td>{record.firstname}</td>\r\n              <td>{record.lastname}</td>\r\n              <td>{record.address}</td>\r\n            </tr>\r\n          }\r\n        </tbody>\r\n      </table>\r\n\r\n      <button onClick={handleLogout}>Logout</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}